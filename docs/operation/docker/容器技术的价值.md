[TOC]

## 容器化部署的价值和应用落地

眼下，你我可能已经错过了互联网技术大爆炸的时代，也没有在数字货币早期的狂热里分到一杯羹。可就在此时此刻，在沉寂了多年的云计算与基础设施领域，一次以“容器”为名的历史变革，正呼之欲出。这一次，我们又有什么理由作壁上观呢？希望通过以下几点让大家理解容器技术的本质以及其独特的魅力。

### 目标

- 容器化解决的问题
- 容器化的相关概念
- 容器化的应用落地

### 亟待解决的问题

#### 频繁部署

功能上线，环境迁移，测试都会涉及到部署，但传统的部署方式太依赖于人工操作，过程中风险不可控，尤其是配置复杂环境的时候，误操作时有发生，即便是一个熟练的人，也需要一段时间才能完成。这段时间的单位可能是小时，也可能是天。

面对微服务架构应用，机器学习模型，大数据应用，扩容缩容等等需要大量部署工作场景时，我们又该如何办呢？如何才能降低部署过程中的重复工作以及风险呢？这是软件生命周期中不得不考虑的问题

#### 资源利用率

考虑到不同应用对物理资源存在不同的需求，往往我们会将物理实例(虚拟机或物理机)分为以下几类：

![Aliyun ECS类型.png](https://note.youdao.com/yws/res/83223/WEBRESOURCE205fa6bfa05e9b7b49085b842f7f2695)

当你需要部署服务时，你需要为你的服务认真挑选合适的实例。理想情况下，这个实例可以满足你的服务的内存消耗以及CPU使用，同时还会预留一部分资源应对峰值计算，这往往会造成资源的浪费。

有没有办法降低该部分的资源浪费呢？把花在不用的资源的钱拿回来？这也是云计算领域中所谓的实现按需付费。

![你也浪费了大量的钱在资源利用上2.gif](https://note.youdao.com/yws/res/83211/WEBRESOURCEd27668a871bc73e242e8a44fefeca9cd)

### 基础概念

容器(Container)其实是一种沙盒技术，要做的事就是将应用打包起来。

#### 镜像

镜像就是应用被打包后的存储形态，本质上就是一个压缩包。这个压缩包里的内容，不单是应用的可执行文件和启停脚本，还包括一个完整操作系统的所有文件目录。只要这个压缩包在手，就可以进行部署，并且完全不需要进行任何配置或修改。

因为镜像有一种极其宝贵的能力：即便宿主机的环境不一致，但程序的运行环境始终是同样的，从而也就避免了一系列复杂的系统兼容问题

#### 容器

![whats-the-diff-container-vs-vm.png](https://note.youdao.com/yws/res/83403/WEBRESOURCE8b99f423d506f7fd7e8e8fecc46e248b)

当镜像被运行起来之后被称之为容器。而容器本质上就是系统的一个特殊进程。之所以容器内的应用看不到其他应用，是因为在创建容器进程时，指定了这个进程所需要启用的一组`Namespace`参数。这样，容器就只能看到当前`Namespace`所限定的资源、文件、设备、状态，或者配置。而对于宿主机以及其他不相关的程序，它就完全看不到了。

而传统的虚拟化技术，首先需要启动一个操作系统，然后将应用运行在其中。而并非宿主机进程那么简单。

由此我们就可以看出传统虚拟化技术存在的弊端，首先虚拟机中运行的操作系统就需要占用几百兆内存。此外，用户应用运行在虚拟机里面，它对宿主机操作系统的调用就不可避免地要经过虚拟化软件的拦截和处理，这本身又是一层性能损耗，尤其网络和磁盘`I/O`的损耗；而相比之下，容器化后的用户应用，却依然还是一个宿主机上的普通进程，这就意味着这些因为虚拟化而带来的性能损耗都是不存在的。

#### 编排

容器本身没有价值，最有价值的是容器编排。那编排是什么？此处就以`Kubernetes`(容器编排领域的事实标准)为例来简要说明以下编排的具体含义。

我们可以将`Kubernetes`视为集群调度程序。`Kubernetes`检查集群中的基础设施(物理机或云，公共或私有)，并获得每台机器的CPU和内存。当需要部署一个容器时，`Kubernetes`会识别容器的各项启动配置，并找到满足要求的最佳服务器然后进行部署。而您无需关心应用程序的具体位置，`Kubernetes`会帮您处理好一切。

举个形象一点的例子，容器编排就像是玩俄罗斯方块一样。

![俄罗斯方块.gif](https://note.youdao.com/yws/res/83209/WEBRESOURCEbcb5a9997a564b1fb7090f66c52aac22)

其中服务器好似一个固定空间，容器应用就是各种大小的方块，操控容器应用的`Kubernetes`就是玩家，而这个玩家很聪明，总是能找到一个最佳方案。

### 容器技术的落地

#### 产线中的应用

待完善

#### DevOps 持续交付

配合 Jenkins 实现从代码变更到代码构建，镜像构建和应用部署的全流程自动化。高效替代业内部署复杂的传统方式。

#### 机器学习

帮助数据工程师轻松部署机器学习应用，无需关心繁琐部署运维，专注核心业务。

#### 微服务架构

实现敏捷开发和部署落地，加速企业业务迭代

#### 边缘计算

边缘计算的优异之处在于利用边缘节点以及客户端进行分析计算，从而达到实时分析的效果，同时也可以保证低延迟。尤其是在物联网领域，如果能快速地对异常检测，制造监控等等进行分析，那必然会让问题及早的得到解决。

### 鸣谢

感谢各位的听讲